<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Punctuation Personality Profile</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .navigation {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 30px;
        }

        .nav-button {
            padding: 12px 24px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
        }

        .nav-button:hover, .nav-button.active {
            background: rgba(255, 255, 255, 0.3);
            border-color: rgba(255, 255, 255, 0.5);
            transform: translateY(-2px);
        }

        .section {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            display: none;
        }

        .section.active {
            display: block;
        }

        .genus-container {
            margin-bottom: 30px;
        }

        .genus-title {
            font-size: 1.4rem;
            color: #5a67d8;
            margin-bottom: 15px;
            border-bottom: 2px solid #e2e8f0;
            padding-bottom: 5px;
        }

        .species-table {
            width: 100%;
            margin-bottom: 20px;
            border-collapse: collapse;
            background: #f8f9ff;
            border-radius: 8px;
            overflow: hidden;
            border-left: 4px solid #5a67d8;
        }

        .species-row {
            border-bottom: 1px solid #e2e8f0;
        }

        .species-row:last-child {
            border-bottom: none;
        }

        .species-symbol {
            font-size: 1.5rem;
            font-weight: bold;
            color: #5a67d8;
            width: 40px;
            text-align: center;
            padding: 8px 12px;
        }

        .species-name {
            font-weight: 600;
            width: 140px;
            padding: 8px 12px;
        }

        .species-description {
            font-size: 0.9rem;
            color: #666;
            font-style: italic;
            padding: 8px 12px;
        }

        .quiz-question {
            margin-bottom: 25px;
            padding: 20px;
            background: #f8f9ff;
            border-radius: 10px;
            border-left: 4px solid #5a67d8;
        }

        .question-number {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 5px;
        }

        .question-text {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 15px;
        }

        .answer-options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .answer-option {
            display: flex;
            align-items: center;
            padding: 12px;
            background: white;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .answer-option:hover {
            border-color: #5a67d8;
            background: #f0f4ff;
        }

        .answer-option.selected {
            border-color: #5a67d8;
            background: #e6f3ff;
        }

        .answer-option.selected-secondary {
            border-color: #a0aec0;
            background: #f7fafc;
        }

        .answer-option.keyboard-highlighted {
            border-color: #667eea;
            background: #edf2f7;
            box-shadow: 0 0 0 2px rgba(102, 126, 234, 0.3);
        }

        .quiz-option.keyboard-highlighted {
            border-color: #667eea;
            background: linear-gradient(135deg, #edf2f7 0%, #e6f3ff 100%);
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.3);
            transform: translateY(-3px);
        }

        .selection-badge {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            font-size: 12px;
            font-weight: bold;
            color: white;
            margin-right: 8px;
        }

        .selection-badge.primary {
            background: #5a67d8;
        }

        .selection-badge.secondary {
            background: #a0aec0;
        }

        .answer-checkbox {
            margin-right: 12px;
            width: 18px;
            height: 18px;
        }

        .progress-bar {
            width: 100%;
            height: 10px;
            background: #e2e8f0;
            border-radius: 5px;
            margin-bottom: 30px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #5a67d8, #667eea);
            width: 0%;
            transition: width 0.3s ease;
        }

        .quiz-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 30px;
        }

        .btn {
            padding: 12px 24px;
            background: #5a67d8;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .btn:hover {
            background: #4c51bf;
            transform: translateY(-2px);
        }

        .btn:disabled {
            background: #a0aec0;
            cursor: not-allowed;
            transform: none;
        }

        .results-container {
            text-align: center;
        }
        
        .personality-traits {
            max-width: 600px;
            margin: 30px auto;
            text-align: left;
            position: relative;
        }

        .strength-indicator {
            position: absolute;
            left: -60px;
            top: 0;
            width: 50px;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            font-size: 0.8rem;
            color: #5a67d8;
        }

        .strength-label {
            font-weight: 600;
            position: relative;
            z-index: 2;
        }

        .strength-label.top {
            margin-bottom: 5px;
        }

        .strength-label.bottom {
            margin-top: 5px;
        }

        .strength-cone {
            flex-grow: 1;
            width: 20px;
            background: linear-gradient(to bottom, #5a67d8 0%, #e2e8f0 100%);
            position: relative;
            clip-path: polygon(0% 0%, 100% 0%, 80% 100%, 20% 100%);
        }

        .trait-item {
            margin-bottom: 10px;
            line-height: 1.5;
            display: flex;
            align-items: baseline;
            gap: 15px;
        }

        .trait-symbol {
            font-size: 1.5rem;
            font-weight: 900;
            color: #5a67d8;
            min-width: 25px;
            text-align: center;
        }

        .trait-name {
            font-weight: bold;
            min-width: 120px;
        }

        .trait-description {
            color: #666;
            font-style: italic;
        }

        .footer {
            text-align: center;
            padding: 30px 20px;
            margin-top: 50px;
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.9rem;
            border-top: 1px solid rgba(255, 255, 255, 0.2);
        }

        .punctuation-profile {
            font-size: 3rem;
            font-weight: bold;
            margin: 20px 0;
            color: #5a67d8;
            letter-spacing: 4px;
        }

        .profile-description {
            font-size: 1.2rem;
            margin-bottom: 30px;
            color: #666;
        }

        .share-url {
            margin-top: 30px;
            padding: 15px;
            background: #f8f9ff;
            border-radius: 8px;
            border: 1px solid #e2e8f0;
        }

        .share-url input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            font-size: 0.9rem;
        }

        .quiz-selection-container {
            text-align: center;
            padding: 20px 0;
        }

        .quiz-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .quiz-option {
            background: white;
            border: 2px solid #e2e8f0;
            border-radius: 15px;
            padding: 30px 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            text-align: center;
        }

        .quiz-option:hover {
            border-color: #5a67d8;
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(90, 103, 216, 0.1);
        }

        .quiz-option.recommended {
            border-color: #5a67d8;
            background: linear-gradient(135deg, #f8f9ff 0%, #e6f3ff 100%);
        }

        .quiz-icon {
            font-size: 3rem;
            margin-bottom: 15px;
        }

        .quiz-option h3 {
            color: #2d3748;
            margin-bottom: 10px;
            font-size: 1.4rem;
        }

        .quiz-stats {
            color: #5a67d8;
            font-weight: 600;
            margin-bottom: 10px;
            font-size: 1rem;
        }

        .quiz-description {
            color: #666;
            font-size: 0.9rem;
            line-height: 1.4;
        }

        .recommended-badge {
            position: absolute;
            top: -10px;
            right: 20px;
            background: #5a67d8;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }

            .header h1 {
                font-size: 2rem;
            }

            .navigation {
                flex-wrap: wrap;
                gap: 10px;
            }

            .nav-button {
                padding: 10px 20px;
                font-size: 0.9rem;
            }

            .species-table {
                font-size: 0.9rem;
            }

            .species-symbol {
                font-size: 1.2rem;
                width: 30px;
                padding: 6px 8px;
            }

            .species-name {
                width: 100px;
                padding: 6px 8px;
            }

            .species-description {
                font-size: 0.8rem;
                padding: 6px 8px;
            }

            .punctuation-profile {
                font-size: 2rem;
            }

            .quiz-options {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .quiz-option {
                padding: 25px 15px;
            }

            .quiz-icon {
                font-size: 2.5rem;
            }

        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>Punctuation Personality Profile</h1>
            <p>Discover which punctuation marks reflect your unique personality</p>
        </header>

        <nav class="navigation">
            <button class="nav-button active" onclick="showSection('ecosystem')">About PPP</button>
            <button class="nav-button" onclick="showSection('quiz')">Take The Test</button>
            <button class="nav-button" onclick="showSection('results')" id="resultsBtn" style="display: none;">Your Results</button>
        </nav>

        <!-- Ecosystem Section -->
        <section id="ecosystem" class="section active">
            <h2>Punctuation has purpose and personality</h2>
            <div style="background: #f8f9ff; padding: 20px; border-radius: 5px; margin-bottom: 30px; border-left: 4px solid #5a67d8;">
		    <!--<div style="background: #f8f9ff; padding: 20px; border-radius: 10px; margin-bottom: 30px; border-left: 4px solid #5a67d8;">-->
		    <!--<h3 style="color: #5a67d8; margin-bottom: 10px;">Punctuation has purpose and personality</h3>-->
                <p style="color: #666; line-height: 1.6; margin-bottom: 15px;">
                    Every punctuation mark shapes how we communicate. The period commands attention with its finality. The question mark leans in with curiosity. The ellipsis trails off into possibility...
                </p>
                <p style="color: #666; line-height: 1.6;">
                    Take the quiz to discover which punctuation marks align with your personality. Do you build bridges like a semicolon, or create order like a period? See where you fit in the ecosystem of written expression.
                </p>
            </div>
            <div id="taxonomy-display">
                <!-- Taxonomy will be populated by JavaScript -->
            </div>
        </section>

        <!-- Quiz Section -->
        <section id="quiz" class="section">
            <!-- Quiz Selection Screen -->
            <div id="quiz-selection" class="quiz-selection-container">
                <h2>Choose Your Quiz Experience</h2>
                <div class="quiz-options">
                    <div class="quiz-option" onclick="startQuiz('quick')">
                        <div class="quiz-icon">‚ö°</div>
                        <h3>Quick Quiz</h3>
                        <p class="quiz-stats">15 questions ‚Ä¢ ~4 minutes</p>
                        <p class="quiz-description">Fast personality snapshot for busy schedules</p>
                    </div>
                    <div class="quiz-option recommended" onclick="startQuiz('standard')">
                        <div class="quiz-icon">üéØ</div>
                        <h3>Standard Test</h3>
                        <p class="quiz-stats">25 questions ‚Ä¢ ~6 minutes</p>
                        <p class="quiz-description">Balanced accuracy with reasonable time commitment</p>
                        <div class="recommended-badge">Recommended</div>
                    </div>
                    <div class="quiz-option" onclick="startQuiz('indepth')">
                        <div class="quiz-icon">üî¨</div>
                        <h3>In-Depth Investigation</h3>
                        <p class="quiz-stats">40 questions ‚Ä¢ ~12 minutes</p>
                        <p class="quiz-description">Comprehensive profiling with maximum accuracy</p>
                    </div>
                </div>
            </div>

            <!-- Quiz Questions (Hidden initially) -->
            <div id="quiz-content" style="display: none;">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                
                <div id="quiz-container">
                    <!-- Quiz questions will be populated by JavaScript -->
                </div>

                <div class="quiz-controls">
                    <button class="btn" onclick="previousQuestion()" id="prevBtn" disabled>Previous</button>
                    <span id="questionCounter">Question 1 of 35</span>
                    <button class="btn" onclick="nextQuestion()" id="nextBtn">Next</button>
                    <button class="btn" onclick="finishQuiz()" id="finishBtn" style="display: none;">Finish Quiz</button>
                    <button class="btn" onclick="keepGoing()" id="keepGoingBtn" style="display: none; background: #667eea;">Keep Going</button>
                </div>
            </div>
        </section>

        <!-- Results Section -->
        <section id="results" class="section">
            <div class="results-container">
                <h2>Your Punctuation Personality Profile</h2>
                <div class="punctuation-profile" id="profileDisplay">
                    <!-- Profile will be populated by JavaScript -->
                </div>
                <div class="profile-description" id="profileDescription">
                    <!-- Description will be populated by JavaScript -->
                </div>
                
                <div class="share-url">
                    <h3>Share Your Results</h3>
                    <input type="text" id="shareUrl" readonly placeholder="Your shareable URL will appear here">
                    <button class="btn" onclick="copyUrl()" style="margin-top: 10px;">Copy URL</button>
                </div>

                <button class="btn" onclick="retakeQuiz()" style="margin-top: 20px;">Retake Quiz</button>
            </div>
        </section>
        
        <footer class="footer">
            Made with ‚ù§Ô∏è (not science)
        </footer>
    </div>

    <script>
        // Global variables
        let currentView = 'ecosystem';
        let currentQuestion = 0;
        let quizAnswers = {};
        let quizData = [];
        let selectedQuizMode = 'standard';
        let currentQuizQuestions = [];
        let currentlySelectedAnswer = 0; // For keyboard navigation
        let currentlySelectedQuizOption = 1; // For quiz selection navigation (0=quick, 1=standard, 2=indepth)

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            initializeTaxonomy();
            initializeQuiz();
            checkUrlForResults();
            checkTestMode();
            setupKeyboardNavigation();
        });

        function setupKeyboardNavigation() {
            document.addEventListener('keydown', function(event) {
                // Handle quiz selection screen
                if (currentView === 'quiz' && document.getElementById('quiz-selection').style.display !== 'none') {
                    handleQuizSelectionKeys(event);
                    return;
                }

                // Only handle keyboard navigation when in quiz mode
                if (currentView !== 'quiz' || document.getElementById('quiz-content').style.display === 'none') {
                    return;
                }

                const question = currentQuizQuestions[currentQuestion];
                if (!question) return;

                const answerElements = document.querySelectorAll('.answer-option');
                const numAnswers = answerElements.length;

                switch(event.key) {
                    case 'ArrowUp':
                    case 'k':
                        event.preventDefault();
                        currentlySelectedAnswer = Math.max(0, currentlySelectedAnswer - 1);
                        updateAnswerHighlight();
                        break;
                    
                    case 'ArrowDown':
                    case 'j':
                        event.preventDefault();
                        currentlySelectedAnswer = Math.min(numAnswers - 1, currentlySelectedAnswer + 1);
                        updateAnswerHighlight();
                        break;
                    
                    case ' ':
                    case 'Enter':
                    case 'x':
                        event.preventDefault();
                        if (answerElements[currentlySelectedAnswer]) {
                            const answerElement = answerElements[currentlySelectedAnswer];
                            const questionId = parseInt(answerElement.getAttribute('data-question-id'));
                            const answerIndex = parseInt(answerElement.getAttribute('data-answer-index'));
                            selectAnswer(questionId, answerIndex);
                            // Keep the selector on the current row after selection
                            setTimeout(() => updateAnswerHighlight(), 50);
                        }
                        break;
                    
                    case 'ArrowRight':
                    case 'l':
                        event.preventDefault();
                        const nextBtn = document.getElementById('nextBtn');
                        const finishBtn = document.getElementById('finishBtn');
                        if (nextBtn && nextBtn.style.display !== 'none' && !nextBtn.disabled) {
                            nextQuestion();
                        } else if (finishBtn && finishBtn.style.display !== 'none') {
                            finishQuiz();
                        }
                        break;
                    
                    case 'ArrowLeft':
                    case 'h':
                        event.preventDefault();
                        const prevBtn = document.getElementById('prevBtn');
                        if (prevBtn && !prevBtn.disabled) {
                            previousQuestion();
                        }
                        break;
                }
            });
        }

        function handleQuizSelectionKeys(event) {
            const quizOptions = document.querySelectorAll('.quiz-option');
            const numOptions = quizOptions.length;

            switch(event.key) {
                case 'ArrowUp':
                case 'k':
                    event.preventDefault();
                    currentlySelectedQuizOption = Math.max(0, currentlySelectedQuizOption - 1);
                    updateQuizSelectionHighlight();
                    break;
                
                case 'ArrowDown':
                case 'j':
                    event.preventDefault();
                    currentlySelectedQuizOption = Math.min(numOptions - 1, currentlySelectedQuizOption + 1);
                    updateQuizSelectionHighlight();
                    break;
                
                case ' ':
                case 'Enter':
                case 'x':
                    event.preventDefault();
                    const modes = ['quick', 'standard', 'indepth'];
                    if (currentlySelectedQuizOption < modes.length) {
                        startQuiz(modes[currentlySelectedQuizOption]);
                    }
                    break;
            }
        }

        function updateQuizSelectionHighlight() {
            const quizOptions = document.querySelectorAll('.quiz-option');
            quizOptions.forEach((element, index) => {
                if (index === currentlySelectedQuizOption) {
                    element.classList.add('keyboard-highlighted');
                } else {
                    element.classList.remove('keyboard-highlighted');
                }
            });
        }

        function updateAnswerHighlight() {
            const answerElements = document.querySelectorAll('.answer-option');
            answerElements.forEach((element, index) => {
                if (index === currentlySelectedAnswer) {
                    element.classList.add('keyboard-highlighted');
                } else {
                    element.classList.remove('keyboard-highlighted');
                }
            });
        }

        // Navigation functions
        function showSection(sectionName) {
            // Hide all sections
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Remove active class from all nav buttons
            document.querySelectorAll('.nav-button').forEach(btn => {
                btn.classList.remove('active');
            });

            // Show selected section and activate button
            document.getElementById(sectionName).classList.add('active');
            
            // Find and activate the correct nav button
            const navButtons = document.querySelectorAll('.nav-button');
            navButtons.forEach(btn => {
                if (btn.textContent.includes('Ecosystem') && sectionName === 'ecosystem') btn.classList.add('active');
                if (btn.textContent.includes('Quiz') && sectionName === 'quiz') btn.classList.add('active');
                if (btn.textContent.includes('Results') && sectionName === 'results') btn.classList.add('active');
            });
            
            currentView = sectionName;

            // Initialize keyboard navigation for quiz selection
            if (sectionName === 'quiz' && document.getElementById('quiz-selection').style.display !== 'none') {
                currentlySelectedQuizOption = 1; // Default to Standard Quiz
                setTimeout(() => updateQuizSelectionHighlight(), 100);
            }

            // Reset quiz if switching away from it
            if (sectionName !== 'quiz' && currentQuestion > 0) {
                // Optional: Ask user if they want to save progress
            }
        }

        // Taxonomy data structure
        const taxonomyData = {
            "Terminator": {
                description: "Sentence enders that bring closure and finality",
                species: [
                    {symbol: ".", name: "Period", description: "Stable, gravitational, attracts order"},
                    {symbol: "!", name: "Exclamation", description: "High energy, repels others, volatile"},
                    {symbol: "?", name: "Question", description: "Curves toward unknowns, seeks pairs"},
                ]
            },
            "Separator": {
                description: "Dividers and spacers that organize and structure",
                species: [
                    {symbol: ",", name: "Comma", description: "Pauses, creates space, gentle separator"},
                    {symbol: ";", name: "Semicolon", description: "Bridge-builder, connects disparate groups"},
                    {symbol: ":", name: "Colon", description: "Binary splitter, creates symmetry"},
                    {symbol: "-", name: "Dash", description: "Linear mover, creates connections"},
                    {symbol: "|", name: "Pipe", description: "Divider, creates clear boundaries"},
                    {symbol: "/", name: "Slash", description: "Path-maker, shows alternative routes"},
                    {symbol: "\\", name: "Backslash", description: "Reverse navigator, moves against the flow"}
                ]
            },
            "Encloser": {
                description: "Boundary makers that contain and protect",
                species: [
                    {symbol: "()", name: "Parentheses", description: "Protective, encircles others"},
                    {symbol: "[]", name: "Brackets", description: "Rigid boundary, territorial"},
                    {symbol: "{}", name: "Braces", description: "Flexible containers, expand to fit contents"},
                    {symbol: "\"\"", name: "Quotes", description: "Mirror-seeker, always wants a partner"}
                ]
            },
            "Modifier": {
                description: "Attachment and possession markers",
                species: [
                    {symbol: "'", name: "Apostrophe", description: "Possessive, claims nearby space"},
                    {symbol: "_", name: "Underscore", description: "Foundation, supports from below"},
                    {symbol: "^", name: "Caret", description: "Ascending, always moves upward"},
                    {symbol: "`", name: "Backtick", description: "Whisper-maker, speaks in coded language"}
                ]
            },
            "Operator": {
                description: "Mathematical and logical processors",
                species: [
                    {symbol: "+", name: "Plus", description: "Accumulator, draws elements toward center"},
                    {symbol: "=", name: "Equals", description: "Balance-keeper, enforces equilibrium"},
                    {symbol: "<", name: "Less-than", description: "Directional pointer, shows hierarchy"},
                    {symbol: ">", name: "Greater-than", description: "Dominance marker, establishes pecking order"},
                    {symbol: "*", name: "Asterisk", description: "Radiant, influences all neighbors"},
                    {symbol: "%", name: "Percent", description: "Proportional divider, measures territories"},
                    {symbol: "#", name: "Hash", description: "Grid-maker, enforces structure"}
                ]
            },
            "Connector": {
                description: "Social linkers that bring elements together",
                species: [
                    {symbol: "&", name: "Ampersand", description: "Social connector, brings others together"},
                    {symbol: "@", name: "At-symbol", description: "Vortex creator, spins others around it"},
                    {symbol: "~", name: "Tilde", description: "Wave-maker, oscillates through space"}
                ]
            },
            "Indicator": {
                description: "Suggestion and continuation markers",
                species: [
                    {symbol: "‚Ä¶", name: "Ellipsis", description: "Dreamer, fades in and out of existence"}
                ]
            }
        };

        function initializeTaxonomy() {
            const container = document.getElementById('taxonomy-display');
            let html = '';

            Object.keys(taxonomyData).forEach(genusName => {
                const genus = taxonomyData[genusName];
                html += `
                    <div class="genus-container">
                        <h3 class="genus-title">${genusName}</h3>
                        <p style="color: #666; margin-bottom: 20px; font-style: italic;">${genus.description}</p>
			<div style="background: #f8f9ff; padding: 20px; border-radius: 10px; margin-bottom: 30px; border-left: 4px solid #5a67d8;">
                        <table class="species-table">
                `;

                genus.species.forEach(species => {
                    html += `
                        <tr class="species-row">
                            <td class="species-symbol">${species.symbol}</td>
                            <td class="species-name">${species.name}</td>
                            <td class="species-description">- ${species.description}</td>
                        </tr>
                    `;
                });

		    html += `</table></div></div>`;
            });

            container.innerHTML = html;
        }

        // Complete quiz questions database
        const allQuizQuestions = [
  {
    "id": 1,
    "category": "Morning Mood",
    "question": "How do you usually greet the day?",
    "answers": [
      {
        "text": "Coffee and a plan",
        "scores": {
          ".": 5,
          ":": 3,
          ",": 2
        }
      },
      {
        "text": "Music and movement, starting high energy",
        "scores": {
          "!": 5,
          "~": 3,
          "*": 2
        }
      },
      {
        "text": "Curious what will happen today",
        "scores": {
          "?": 5,
          "‚Ä¶": 4
        }
      },
      {
        "text": "Checking messages and notifications",
        "scores": {
          "@": 5,
          "&": 3,
          "\"\"": 2
        }
      },
      {
        "text": "Hit snooze and drift in and out",
        "scores": {
          "‚Ä¶": 4,
          "_": 3,
          ",": 2
        }
      },
      {
        "text": "List or schedule to get organized",
        "scores": {
          "#": 5,
          "=": 3,
          "|": 2
        }
      }
    ]
  },
  {
    "id": 2,
    "category": "Social Style",
    "question": "At a party, you are most likely to‚Ä¶",
    "answers": [
      {
        "text": "Stay with trusted group",
        "scores": {
          "()": 5,
          "[]": 3
        }
      },
      {
        "text": "Bridge different groups",
        "scores": {
          ";": 5,
          "&": 3
        }
      },
      {
        "text": "Grab attention with energy",
        "scores": {
          "!": 5,
          "*": 4
        }
      },
      {
        "text": "Quietly observe",
        "scores": {
          "‚Ä¶": 5,
          "`": 3
        }
      },
      {
        "text": "None of these fit / I avoid parties (N/A)",
        "scores": {
          "\\": 3,
          "[]": 3,
          "‚Ä¶": 2
        }
      }
    ]
  },
  {
    "id": 3,
    "category": "Decision Making",
    "question": "When faced with a tough choice, you‚Ä¶",
    "answers": [
      {
        "text": "List pros/cons",
        "scores": {
          "=": 5,
          "%": 4,
          "#": 2
        }
      },
      {
        "text": "Ask others",
        "scores": {
          "?": 5,
          "&": 3
        }
      },
      {
        "text": "Trust your gut",
        "scores": {
          "!": 5,
          "'": 3
        }
      },
      {
        "text": "Wait and see",
        "scores": {
          "‚Ä¶": 5,
          "_": 3
        }
      }
    ]
  },
  {
    "id": 4,
    "category": "Work Habits",
    "question": "Your desk is usually‚Ä¶",
    "answers": [
      {
        "text": "Neat and tidy",
        "scores": {
          ".": 5,
          "#": 4,
          ",": 3
        }
      },
      {
        "text": "Organized chaos",
        "scores": {
          "-": 5,
          "~": 4,
          "/": 2
        }
      },
      {
        "text": "Minimal essentials",
        "scores": {
          "|": 5,
          "_": 3
        }
      },
      {
        "text": "Piled with reminders",
        "scores": {
          "^": 5,
          ":": 3,
          "{}": 2
        }
      }
    ]
  },
  {
    "id": 5,
    "category": "Conflict Style",
    "question": "When disagreements happen, you tend to‚Ä¶",
    "answers": [
      {
        "text": "Find middle ground",
        "scores": {
          ";": 5,
          "+": 3
        }
      },
      {
        "text": "Stand firm and hold the line",
        "scores": {
          "|": 5,
          ">": 4
        }
      },
      {
        "text": "Defuse with humor or distraction",
        "scores": {
          "~": 5,
          "()": 3
        }
      },
      {
        "text": "Keep probing with questions",
        "scores": {
          "?": 5,
          ":": 3
        }
      },
      {
        "text": "Withdraw or fade until it passes",
        "scores": {
          "‚Ä¶": 5,
          "\\": 3
        }
      },
      {
        "text": "Enforce structure and rules",
        "scores": {
          "#": 5,
          "[]": 3
        }
      }
    ]
  },
  {
    "id": 6,
    "category": "Communication",
    "question": "Your text messages usually‚Ä¶",
    "answers": [
      {
        "text": "Are short and clear",
        "scores": {
          ".": 5,
          "-": 3,
          "|": 2
        }
      },
      {
        "text": "Have lots of excitement!!!",
        "scores": {
          "!": 5,
          "*": 4
        }
      },
      {
        "text": "Trail off‚Ä¶ leaving things open",
        "scores": {
          "‚Ä¶": 5,
          "~": 3
        }
      },
      {
        "text": "Quote or echo others",
        "scores": {
          "\"\"": 5,
          "@": 3,
          "`": 2
        }
      },
      {
        "text": "Say little; hint in code or inside jokes",
        "scores": {
          "`": 5,
          "'": 3,
          "‚Ä¶": 2
        }
      }
    ]
  },
  {
    "id": 7,
    "category": "Problem Solving",
    "question": "You approach puzzles by‚Ä¶",
    "answers": [
      {
        "text": "Lining up all the pieces logically",
        "scores": {
          "=": 5,
          "#": 3
        }
      },
      {
        "text": "Trying a bunch of wild possibilities",
        "scores": {
          "?": 5,
          "!": 4
        }
      },
      {
        "text": "Looking for patterns and connections",
        "scores": {
          ";": 5,
          "*": 3
        }
      },
      {
        "text": "Taking breaks and coming back fresh",
        "scores": {
          "‚Ä¶": 5,
          "_": 3
        }
      }
    ]
  },
  {
    "id": 8,
    "category": "Travel Style",
    "question": "On a trip, you prefer to‚Ä¶",
    "answers": [
      {
        "text": "Plan everything in advance",
        "scores": {
          ".": 5,
          "{}": 4,
          "=": 3
        }
      },
      {
        "text": "Follow spontaneous detours",
        "scores": {
          "?": 4,
          "/": 5,
          "\\": 3
        }
      },
      {
        "text": "Stick to the main path",
        "scores": {
          "|": 5,
          "-": 4,
          ">": 3
        }
      },
      {
        "text": "Mix structure and free time",
        "scores": {
          ";": 5,
          ":": 4,
          "+": 2
        }
      },
      {
        "text": "I rarely travel / prefer to stay put (N/A)",
        "scores": {
          "|": 3,
          ".": 2,
          "[]": 2
        }
      }
    ]
  },
  {
    "id": 9,
    "category": "Energy Level",
    "question": "What best describes your vibe?",
    "answers": [
      {
        "text": "Grounded and steady",
        "scores": {
          ".": 5,
          "_": 3
        }
      },
      {
        "text": "Bubbly and loud",
        "scores": {
          "!": 5,
          "@": 3
        }
      },
      {
        "text": "Mysterious, hard to read",
        "scores": {
          "‚Ä¶": 5,
          "`": 3
        }
      },
      {
        "text": "Up-and-down waves",
        "scores": {
          "~": 5,
          "^": 3
        }
      }
    ]
  },
  {
    "id": 10,
    "category": "Collaboration",
    "question": "In a group project, you are‚Ä¶",
    "answers": [
      {
        "text": "The organizer",
        "scores": {
          "#": 5,
          ".": 3,
          "[]": 2
        }
      },
      {
        "text": "The hype person",
        "scores": {
          "!": 5,
          "*": 4
        }
      },
      {
        "text": "The connector",
        "scores": {
          "&": 5,
          ";": 3
        }
      },
      {
        "text": "The quiet observer",
        "scores": {
          "‚Ä¶": 5,
          "()": 3
        }
      }
    ]
  },
  {
    "id": 11,
    "category": "Leisure",
    "question": "Your perfect free evening looks like‚Ä¶",
    "answers": [
      {
        "text": "Reading or journaling",
        "scores": {
          "'": 5,
          "‚Ä¶": 4
        }
      },
      {
        "text": "Dinner out with friends",
        "scores": {
          "&": 5,
          ":": 3
        }
      },
      {
        "text": "Tinkering on projects",
        "scores": {
          "^": 5,
          "+": 3
        }
      },
      {
        "text": "Watching movies/shows",
        "scores": {
          "\"\"": 5,
          "()": 3
        }
      }
    ]
  },
  {
    "id": 12,
    "category": "Life Outlook",
    "question": "Which phrase feels most like you?",
    "answers": [
      {
        "text": "Keep it simple.",
        "scores": {
          ".": 5,
          "<": 3,
          ",": 2
        }
      },
      {
        "text": "Go big or go home!",
        "scores": {
          "!": 5,
          "*": 4
        }
      },
      {
        "text": "What if‚Ä¶?",
        "scores": {
          "?": 5,
          "‚Ä¶": 4
        }
      },
      {
        "text": "We‚Äôre better together",
        "scores": {
          "&": 5,
          "+": 3
        }
      }
    ]
  },
  {
    "id": 13,
    "category": "Style Choices",
    "question": "Your fashion style is‚Ä¶",
    "answers": [
      {
        "text": "Clean and classic",
        "scores": {
          ",": 5,
          ".": 3
        }
      },
      {
        "text": "Bold and expressive",
        "scores": {
          "!": 5,
          "*": 3
        }
      },
      {
        "text": "Alternative / against the flow",
        "scores": {
          "\\": 5,
          "`": 3
        }
      },
      {
        "text": "Balanced and neutral",
        "scores": {
          "=": 5,
          "%": 3
        }
      },
      {
        "text": "Layered and eclectic",
        "scores": {
          "{}": 5,
          "\"\"": 3
        }
      },
      {
        "text": "Casual and understated",
        "scores": {
          "_": 5,
          "-": 3
        }
      },
      {
        "text": "I don't really care about fashion (N/A)",
        "scores": {
          "_": 3,
          "<": 2,
          ".": 2
        }
      }
    ]
  },
  {
    "id": 14,
    "category": "Leadership",
    "question": "When leading others, you‚Ä¶",
    "answers": [
      {
        "text": "Give clear instructions",
        "scores": {
          ":": 5,
          "|": 3
        }
      },
      {
        "text": "Point the way forward",
        "scores": {
          ">": 5,
          "^": 3
        }
      },
      {
        "text": "Encourage alternatives",
        "scores": {
          "<": 5,
          "/": 4
        }
      },
      {
        "text": "Support from behind",
        "scores": {
          "_": 5,
          "()": 3
        }
      }
    ]
  },
  {
    "id": 15,
    "category": "Mindset",
    "question": "How do you handle change?",
    "answers": [
      {
        "text": "Adapt and keep moving",
        "scores": {
          "-": 5,
          "~": 4
        }
      },
      {
        "text": "Double down and hold firm",
        "scores": {
          "[]": 5,
          "#": 4
        }
      },
      {
        "text": "Expand to fit",
        "scores": {
          "{}": 5,
          "+": 4
        }
      },
      {
        "text": "Fade in and out",
        "scores": {
          "‚Ä¶": 5,
          "%": 3
        }
      }
    ]
  },
  {
    "id": 16,
    "category": "Curiosity",
    "question": "When something puzzles you, your first move is‚Ä¶",
    "answers": [
      {
        "text": "Search online immediately",
        "scores": {
          "@": 5,
          "/": 3,
          "#": 2
        }
      },
      {
        "text": "Ask someone nearby",
        "scores": {
          "&": 5,
          "?": 3
        }
      },
      {
        "text": "Sit and think it through",
        "scores": {
          ".": 5,
          "=": 3
        }
      },
      {
        "text": "Let it float in the background until the answer comes",
        "scores": {
          "‚Ä¶": 5,
          "_": 3
        }
      }
    ]
  },
  {
    "id": 17,
    "category": "Humor",
    "question": "Your sense of humor leans toward‚Ä¶",
    "answers": [
      {
        "text": "Playful exaggeration",
        "scores": {
          "!": 5,
          "*": 3
        }
      },
      {
        "text": "Clever wordplay",
        "scores": {
          "'": 5,
          "\"\"": 3
        }
      },
      {
        "text": "Dry or understated wit",
        "scores": {
          ".": 5,
          "`": 3
        }
      },
      {
        "text": "Absurd and surreal",
        "scores": {
          "~": 5,
          "{}": 3
        }
      }
    ]
  },
  {
    "id": 18,
    "category": "Learning",
    "question": "When learning something new, you prefer‚Ä¶",
    "answers": [
      {
        "text": "Step-by-step structure",
        "scores": {
          ":": 5,
          "#": 3,
          "=": 2
        }
      },
      {
        "text": "Hands-on experimentation",
        "scores": {
          "/": 5,
          "!": 3,
          "+": 2
        }
      },
      {
        "text": "Comparing multiple approaches",
        "scores": {
          ";": 5,
          "<": 3,
          "%": 2
        }
      },
      {
        "text": "Quiet reflection and notes",
        "scores": {
          "‚Ä¶": 5,
          "'": 3
        }
      }
    ]
  },
  {
    "id": 19,
    "category": "Tech Habits",
    "question": "How do you relate to technology?",
    "answers": [
      {
        "text": "Use it to stay organized",
        "scores": {
          "#": 5,
          "_": 3
        }
      },
      {
        "text": "Use it for social connection",
        "scores": {
          "@": 5,
          "&": 3
        }
      },
      {
        "text": "Tinker and modify",
        "scores": {
          "^": 5,
          "+": 3
        }
      },
      {
        "text": "Mostly avoid it when I can",
        "scores": {
          "\\": 5,
          "()": 3
        }
      }
    ]
  },
  {
    "id": 20,
    "category": "Decisions",
    "question": "When making a big life decision, you‚Ä¶",
    "answers": [
      {
        "text": "Stick to tried-and-true methods",
        "scores": {
          ".": 5
        }
      },
      {
        "text": "Lean on intuition and boldness",
        "scores": {
          "!": 5,
          ">": 3
        }
      },
      {
        "text": "Ask questions, gather input",
        "scores": {
          "?": 5,
          "&": 3
        }
      },
      {
        "text": "Map out all the possible paths",
        "scores": {
          "/": 5,
          "{}": 3
        }
      }
    ]
  },
  {
    "id": 21,
    "category": "Creativity",
    "question": "Your creative process looks like‚Ä¶",
    "answers": [
      {
        "text": "Start structured, then riff",
        "scores": {
          ":": 5,
          "~": 3
        }
      },
      {
        "text": "Explosions of sudden energy",
        "scores": {
          "!": 5,
          "*": 3,
          ">": 2
        }
      },
      {
        "text": "Steady layering and refinement",
        "scores": {
          ".": 5,
          "_": 3
        }
      },
      {
        "text": "Mixing unexpected elements",
        "scores": {
          ";": 5,
          "+": 3
        }
      },
      {
        "text": "Edit things down to the essentials",
        "scores": {
          "<": 5,
          ".": 2,
          ",": 2
        }
      }
    ]
  },
  {
    "id": 22,
    "category": "Relationships",
    "question": "In relationships, you value most‚Ä¶",
    "answers": [
      {
        "text": "Stability and reliability",
        "scores": {
          ".": 5,
          "()": 3
        }
      },
      {
        "text": "Excitement and passion",
        "scores": {
          "!": 5,
          "\"\"": 3
        }
      },
      {
        "text": "Shared curiosity and growth",
        "scores": {
          "?": 5,
          "^": 3
        }
      },
      {
        "text": "Balance and fairness",
        "scores": {
          "=": 5,
          "%": 3
        }
      },
      {
        "text": "Prefer not to answer / none of these (N/A)",
        "scores": {
          "[]": 3,
          "()": 2,
          "\\": 2
        }
      }
    ]
  },
  {
    "id": 23,
    "category": "Leisure",
    "question": "When you have free time, you‚Ä¶",
    "answers": [
      {
        "text": "Organize or tidy things",
        "scores": {
          ",": 5,
          "#": 3
        }
      },
      {
        "text": "Call or hang out with friends",
        "scores": {
          "&": 5,
          "@": 3
        }
      },
      {
        "text": "Wander, explore, or daydream",
        "scores": {
          "‚Ä¶": 5,
          "~": 3
        }
      },
      {
        "text": "Tinker or build something new",
        "scores": {
          "^": 5,
          "+": 3
        }
      }
    ]
  },
  {
    "id": 24,
    "category": "Risk",
    "question": "Your attitude toward risk is‚Ä¶",
    "answers": [
      {
        "text": "Cautious and steady",
        "scores": {
          ".": 5,
          "[]": 3
        }
      },
      {
        "text": "All-in and bold",
        "scores": {
          "!": 5,
          ">": 3
        }
      },
      {
        "text": "Curious but calculated",
        "scores": {
          "?": 5,
          "%": 4
        }
      },
      {
        "text": "Fluid and adaptable",
        "scores": {
          "~": 5,
          "-": 3
        }
      }
    ]
  },
  {
    "id": 25,
    "category": "Imagination",
    "question": "Your imagination is like‚Ä¶",
    "answers": [
      {
        "text": "A structured grid",
        "scores": {
          "#": 5,
          "=": 3
        }
      },
      {
        "text": "A sparkling starburst",
        "scores": {
          "*": 5,
          "^": 3
        }
      },
      {
        "text": "A flowing river",
        "scores": {
          "~": 5,
          "/": 3
        }
      },
      {
        "text": "An endless horizon",
        "scores": {
          "‚Ä¶": 5,
          "<": 4
        }
      }
    ]
  },
  {
    "id": 26,
    "category": "Work Environment",
    "question": "Where do you do your best work?",
    "answers": [
      {
        "text": "Structured office with clear processes",
        "scores": {
          ".": 5,
          "#": 4,
          "[]": 3
        }
      },
      {
        "text": "Collaborative co-working space",
        "scores": {
          "&": 5,
          ";": 4
        }
      },
      {
        "text": "Quiet home office/corner",
        "scores": {
          "()": 5,
          "_": 3
        }
      },
      {
        "text": "On the move: caf√©s, trains, wherever",
        "scores": {
          "/": 5,
          "~": 3,
          "-": 2
        }
      }
    ]
  },
  {
    "id": 27,
    "category": "Conflict",
    "question": "When conflict pops up, you usually‚Ä¶",
    "answers": [
      {
        "text": "Address it head-on, directly",
        "scores": {
          "!": 5,
          ">": 4
        }
      },
      {
        "text": "Ask questions and listen first",
        "scores": {
          "?": 5,
          ":": 3
        }
      },
      {
        "text": "Mediate and connect both sides",
        "scores": {
          ";": 5,
          "&": 3
        }
      },
      {
        "text": "Step back or retreat until it cools down",
        "scores": {
          "‚Ä¶": 4,
          "\\": 3,
          "_": 2
        }
      },
      {
        "text": "Draw clear lines and boundaries",
        "scores": {
          "|": 5,
          "[]": 4
        }
      }
    ]
  },
  {
    "id": 28,
    "category": "Creativity",
    "question": "Your creative style is mostly‚Ä¶",
    "answers": [
      {
        "text": "Structured and methodical",
        "scores": {
          ".": 5,
          "=": 4
        }
      },
      {
        "text": "Spontaneous bursts of inspiration",
        "scores": {
          "!": 5,
          "*": 4
        }
      },
      {
        "text": "Collaborative brainstorms",
        "scores": {
          "&": 5,
          "+": 4
        }
      },
      {
        "text": "Introspective or coded",
        "scores": {
          "`": 5,
          "\"\"": 3
        }
      },
      {
        "text": "Experimental‚Äîbreak the rules and see",
        "scores": {
          "-": 5,
          "%": 3,
          "/": 2
        }
      }
    ]
  },
  {
    "id": 29,
    "category": "Decisions",
    "question": "How do you decide when it really matters?",
    "answers": [
      {
        "text": "Lists and logic win",
        "scores": {
          "=": 5,
          "<": 4
        }
      },
      {
        "text": "Go with your gut feeling",
        "scores": {
          "'": 5,
          "!": 3
        }
      },
      {
        "text": "Ask others and compare perspectives",
        "scores": {
          "?": 5,
          "&": 3
        }
      },
      {
        "text": "Delay‚Äîlet it marinate",
        "scores": {
          "‚Ä¶": 4,
          ",": 3
        }
      }
    ]
  },
  {
    "id": 30,
    "category": "Digital Life",
    "question": "Your phone use looks like‚Ä¶",
    "answers": [
      {
        "text": "Constant notifications‚Äîalways on",
        "scores": {
          "@": 5,
          "!": 3
        }
      },
      {
        "text": "Clean folders, everything organized",
        "scores": {
          "#": 5,
          "[]": 3
        }
      },
      {
        "text": "Minimalist/low-tech by choice",
        "scores": {
          "_": 5,
          "\\": 3
        }
      },
      {
        "text": "Texting friends all the time",
        "scores": {
          "'": 5,
          "&": 3
        }
      },
      {
        "text": "Endless scroll and daydreaming",
        "scores": {
          "‚Ä¶": 5,
          "~": 3
        }
      }
    ]
  },
  {
    "id": 31,
    "category": "Friendships",
    "question": "In your friend group, you‚Äôre usually‚Ä¶",
    "answers": [
      {
        "text": "The planner/organizer",
        "scores": {
          ",": 5,
          "#": 3
        }
      },
      {
        "text": "The supportive listener",
        "scores": {
          "()": 5,
          "_": 3
        }
      },
      {
        "text": "The life of the party",
        "scores": {
          "!": 5,
          "@": 3
        }
      },
      {
        "text": "The connector of circles",
        "scores": {
          "&": 5,
          ";": 3
        }
      }
    ]
  },
  {
    "id": 32,
    "category": "Strengths",
    "question": "A hidden strength of yours is‚Ä¶",
    "answers": [
      {
        "text": "Stability under pressure",
        "scores": {
          ".": 5,
          "=": 3
        }
      },
      {
        "text": "Bringing people together",
        "scores": {
          "&": 5,
          ";": 3
        }
      },
      {
        "text": "Creative problem-solving",
        "scores": {
          "*": 5,
          "/": 3
        }
      },
      {
        "text": "Protecting the people/things you care about",
        "scores": {
          "()": 5,
          "{}": 3
        }
      }
    ]
  },
  {
    "id": 33,
    "category": "Resilience",
    "question": "When you fail at something, you tend to‚Ä¶",
    "answers": [
      {
        "text": "Learn and adjust your approach",
        "scores": {
          "?": 5,
          ":": 3
        }
      },
      {
        "text": "Push harder and double down",
        "scores": {
          "!": 5,
          ">": 3
        }
      },
      {
        "text": "Step back and reflect",
        "scores": {
          "‚Ä¶": 5,
          "\"\"": 3
        }
      },
      {
        "text": "Joke it off and move on",
        "scores": {
          "'": 4,
          "~": 3
        }
      }
    ]
  },
  {
    "id": 34,
    "category": "Social Presence",
    "question": "At a big gathering, you‚Äôre‚Ä¶",
    "answers": [
      {
        "text": "Center of attention",
        "scores": {
          "!": 5,
          "@": 3
        }
      },
      {
        "text": "Quiet observer",
        "scores": {
          ".": 4,
          "‚Ä¶": 3
        }
      },
      {
        "text": "Floating between groups",
        "scores": {
          ";": 5,
          "~": 3
        }
      },
      {
        "text": "Loyal to one circle",
        "scores": {
          ",": 5,
          "()": 3
        }
      },
      {
        "text": "Starting deep conversations",
        "scores": {
          "?": 5,
          "\"\"": 3
        }
      }
    ]
  },
  {
    "id": 35,
    "category": "Affection",
    "question": "You show love/affection mostly through‚Ä¶",
    "answers": [
      {
        "text": "Words and notes",
        "scores": {
          "\"\"": 5,
          "'": 3
        }
      },
      {
        "text": "Acts of service",
        "scores": {
          "_": 5,
          ":": 3
        }
      },
      {
        "text": "Big gestures",
        "scores": {
          "!": 5,
          "*": 3
        }
      },
      {
        "text": "Quiet presence",
        "scores": {
          "()": 5,
          "‚Ä¶": 3
        }
      }
    ]
  },
  {
    "id": 36,
    "category": "Stress",
    "question": "Under stress, you‚Äôre most likely to‚Ä¶",
    "answers": [
      {
        "text": "Hyper-focus and organize",
        "scores": {
          "#": 5,
          "=": 3
        }
      },
      {
        "text": "Reach out to friends",
        "scores": {
          "&": 5,
          "@": 3
        }
      },
      {
        "text": "Internalize quietly",
        "scores": {
          "_": 5,
          "‚Ä¶": 3
        }
      },
      {
        "text": "Have quick bursts of emotion",
        "scores": {
          "!": 5,
          "-": 3
        }
      },
      {
        "text": "Seek humor or distraction",
        "scores": {
          "~": 5,
          "'": 3
        }
      }
    ]
  },
  {
    "id": 37,
    "category": "Leadership",
    "question": "Your leadership style leans‚Ä¶",
    "answers": [
      {
        "text": "Visionary/directive",
        "scores": {
          ">": 5,
          "^": 3
        }
      },
      {
        "text": "Collaborative/connector",
        "scores": {
          "&": 5,
          ";": 3
        }
      },
      {
        "text": "Methodical/planner",
        "scores": {
          ".": 5,
          "#": 3
        }
      },
      {
        "text": "Quiet/supportive",
        "scores": {
          "()": 5,
          "_": 3
        }
      },
      {
        "text": "Challenger of norms",
        "scores": {
          "-": 5,
          "%": 3
        }
      }
    ]
  },
  {
    "id": 38,
    "category": "Pet Peeves",
    "question": "Your biggest pet peeve is‚Ä¶",
    "answers": [
      {
        "text": "Disorder and mess",
        "scores": {
          "#": 5,
          "[]": 4
        }
      },
      {
        "text": "People not listening",
        "scores": {
          "!": 4,
          ">": 3
        }
      },
      {
        "text": "Lack of fairness",
        "scores": {
          "=": 5,
          "<": 3
        }
      },
      {
        "text": "Repetition and monotony",
        "scores": {
          "‚Ä¶": 4,
          "-": 3
        }
      }
    ]
  },
  {
    "id": 39,
    "category": "Legacy",
    "question": "You‚Äôd most like to be remembered for‚Ä¶",
    "answers": [
      {
        "text": "Kindness and relationships",
        "scores": {
          "&": 5,
          "()": 3
        }
      },
      {
        "text": "Achievements and impact",
        "scores": {
          ">": 5,
          "^": 3
        }
      },
      {
        "text": "Creativity",
        "scores": {
          "*": 5,
          "~": 3
        }
      },
      {
        "text": "Wisdom/ideas",
        "scores": {
          "?": 5,
          "\"\"": 3
        }
      }
    ]
  },
  {
    "id": 40,
    "category": "Motto",
    "question": "Pick the motto that fits you best:",
    "answers": [
      {
        "text": "Keep moving forward",
        "scores": {
          ">": 5,
          "-": 3
        }
      },
      {
        "text": "Balance in all things",
        "scores": {
          ".": 5,
          "=": 3
        }
      },
      {
        "text": "Ask more questions",
        "scores": {
          "?": 5,
          ":": 3
        }
      },
      {
        "text": "Make it fun",
        "scores": {
          "~": 5,
          "!": 3
        }
      },
      {
        "text": "Stay connected",
        "scores": {
          "&": 5,
          "@": 3
        }
      },
      {
        "text": "Protect what matters",
        "scores": {
          "()": 5,
          "{}": 3
        }
      }
    ]
  }
];
        // Quiz mode configurations
        const quizModes = {
            quick: {
                name: "Quick Quiz",
                questionCount: 15,
                timeEstimate: "4 minutes",
                questionsPerCategory: 3,
                confidenceLevel: "Basic"
            },
            standard: {
                name: "Standard Quiz", 
                questionCount: 25,
                timeEstimate: "6 minutes",
                questionsPerCategory: 5,
                confidenceLevel: "Good"
            },
            indepth: {
                name: "In-Depth Quiz",
                questionCount: 40,
                timeEstimate: "12 minutes", 
                questionsPerCategory: 6.7,
                confidenceLevel: "High"
            }
        };

        // Shuffle array utility function
        function shuffleArray(array) {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }


        // Question selection algorithm: take first N questions, then randomize
        function selectQuestionsForMode(mode) {
            const config = quizModes[mode];
            
            // Take the first N questions based on the mode
            const selectedQuestions = allQuizQuestions.slice(0, config.questionCount);
            
            // Randomize the selected questions
            const finalQuestions = shuffleArray(selectedQuestions);
            
            console.log(`${config.name}: Selected first ${config.questionCount} questions and randomized order`);
            
            return finalQuestions;
        }

        // Quiz initialization functions
        function startQuiz(mode) {
            selectedQuizMode = mode;
            currentQuizQuestions = selectQuestionsForMode(mode);
            
            // Hide quiz selection screen
            document.getElementById('quiz-selection').style.display = 'none';
            document.getElementById('quiz-content').style.display = 'block';
            
            // Initialize quiz with selected questions
            currentQuestion = 0;
            quizAnswers = {};
            displayQuestion();
            updateProgress();
            updateNavigationButtons();
        }

        function initializeQuiz() {
            // Reset to selection screen
            document.getElementById('quiz-selection').style.display = 'block';
            document.getElementById('quiz-content').style.display = 'none';
            currentQuestion = 0;
            quizAnswers = {};
        }

        function displayQuestion() {
            const container = document.getElementById('quiz-container');
            const question = currentQuizQuestions[currentQuestion];
            
            // Create shuffled answers with original indices preserved
            if (!question.shuffledAnswers) {
                question.shuffledAnswers = question.answers.map((answer, originalIndex) => ({
                    ...answer,
                    originalIndex: originalIndex
                }));
                question.shuffledAnswers = shuffleArray(question.shuffledAnswers);
            }
            
            let html = `
                <div class="quiz-question">
                    <div class="question-number">Question ${currentQuestion + 1} of ${currentQuizQuestions.length} - ${question.category}</div>
                    <div class="question-text">${question.question}</div>
                    <div class="answer-options">
            `;

            question.shuffledAnswers.forEach((answer, displayIndex) => {
                const originalIndex = answer.originalIndex;
                const answerId = `q${question.id}_a${originalIndex}`;
                const isSelected = quizAnswers[question.id]?.primary === originalIndex;
                const isSecondary = quizAnswers[question.id]?.secondary === originalIndex;
                
                let badge = '';
                if (isSelected) {
                    badge = '<div class="selection-badge primary">1</div>';
                } else if (isSecondary) {
                    badge = '<div class="selection-badge secondary">2</div>';
                }
                
                html += `
                    <div class="answer-option ${isSelected ? 'selected' : ''} ${isSecondary ? 'selected-secondary' : ''}" 
                         onclick="selectAnswer(${question.id}, ${originalIndex})"
                         data-question-id="${question.id}"
                         data-answer-index="${originalIndex}">
                        ${badge}
                        <span>${answer.text}</span>
                    </div>
                `;
            });

            html += `
                    </div>
                    <div style="margin-top: 15px; font-size: 0.9rem; color: #666;">
                        üí° Select your top TWO answers: <span style="color: #5a67d8; font-weight: bold;">‚ë†Primary</span> (most like you) + <span style="color: #a0aec0; font-weight: bold;">‚ë°Secondary</span> (somewhat like you)
                    </div>
                </div>
            `;

            container.innerHTML = html;
            
            // Only reset keyboard navigation to first answer when moving to a new question
            // Keep current position when refreshing the same question
            const shouldResetPosition = !container.dataset.lastQuestionId || 
                                      container.dataset.lastQuestionId !== question.id.toString();
            
            if (shouldResetPosition) {
                currentlySelectedAnswer = 0;
            }
            
            container.dataset.lastQuestionId = question.id;
            updateAnswerHighlight();
        }

        function selectAnswer(questionId, answerIndex) {
            if (!quizAnswers[questionId]) {
                quizAnswers[questionId] = {};
            }

            const currentAnswers = quizAnswers[questionId];
            
            // If clicking the same answer that's already primary, remove it
            if (currentAnswers.primary === answerIndex) {
                delete currentAnswers.primary;
            }
            // If clicking the same answer that's already secondary, remove it
            else if (currentAnswers.secondary === answerIndex) {
                delete currentAnswers.secondary;
            }
            // If no primary answer yet, make this primary
            else if (currentAnswers.primary === undefined) {
                currentAnswers.primary = answerIndex;
            }
            // If no secondary answer yet, make this secondary
            else if (currentAnswers.secondary === undefined) {
                currentAnswers.secondary = answerIndex;
            }
            // If both slots filled, replace secondary with this answer
            else {
                currentAnswers.secondary = answerIndex;
            }

            displayQuestion(); // Refresh the display
            updateNavigationButtons();
        }

        function updateProgress() {
            const progress = ((currentQuestion + 1) / currentQuizQuestions.length) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
            document.getElementById('questionCounter').textContent = 
                `Question ${currentQuestion + 1} of ${currentQuizQuestions.length}`;
        }

        function updateNavigationButtons() {
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            const finishBtn = document.getElementById('finishBtn');
            const keepGoingBtn = document.getElementById('keepGoingBtn');

            prevBtn.disabled = currentQuestion === 0;
            
            const hasAnswer = quizAnswers[currentQuizQuestions[currentQuestion].id]?.primary !== undefined;
            
            if (currentQuestion === currentQuizQuestions.length - 1) {
                nextBtn.style.display = 'none';
                finishBtn.style.display = hasAnswer ? 'inline-block' : 'none';
                
                // Show "Keep Going" button if we can extend the quiz
                if (hasAnswer && canExtendQuiz()) {
                    keepGoingBtn.style.display = 'inline-block';
                    const extensionText = getExtensionText();
                    keepGoingBtn.textContent = extensionText;
                } else {
                    keepGoingBtn.style.display = 'none';
                }
            } else {
                nextBtn.style.display = 'inline-block';
                nextBtn.disabled = !hasAnswer;
                finishBtn.style.display = 'none';
                keepGoingBtn.style.display = 'none';
            }
        }

        function canExtendQuiz() {
            const currentLength = currentQuizQuestions.length;
            const maxQuestions = allQuizQuestions.length;
            
            // Can extend if we're at 15 questions (quick->standard) or 25 questions (standard->indepth)
            return (currentLength === 15 && maxQuestions >= 25) || 
                   (currentLength === 25 && maxQuestions >= 40);
        }

        function getExtensionText() {
            const currentLength = currentQuizQuestions.length;
            if (currentLength === 15) {
                return "Keep Going (10 more)";
            } else if (currentLength === 25) {
                return "Keep Going (15 more)";
            }
            return "Keep Going";
        }

        function keepGoing() {
            const currentLength = currentQuizQuestions.length;
            let newLength;
            
            if (currentLength === 15) {
                // Extend from quick (15) to standard (25)
                newLength = 25;
                selectedQuizMode = 'standard';
            } else if (currentLength === 25) {
                // Extend from standard (25) to indepth (40)
                newLength = 40;
                selectedQuizMode = 'indepth';
            } else {
                return; // Can't extend further
            }
            
            // Get additional questions from the full set
            const shuffledQuestions = shuffleArray([...allQuizQuestions]);
            const usedQuestionIds = new Set(currentQuizQuestions.map(q => q.id));
            const additionalQuestions = shuffledQuestions.filter(q => !usedQuestionIds.has(q.id));
            
            // Add the additional questions needed
            const questionsToAdd = newLength - currentLength;
            currentQuizQuestions.push(...additionalQuestions.slice(0, questionsToAdd));
            
            // Continue to next question
            nextQuestion();
        }

        function checkUrlForResults() {
            const urlParams = new URLSearchParams(window.location.search);
            const profileParam = urlParams.get('profile');
            
            if (profileParam) {
                const profile = decodeURIComponent(profileParam);
                displaySharedResults(profile);
                showSection('results');
                document.getElementById('resultsBtn').style.display = 'inline-block';
            }
        }

        function checkTestMode() {
            const urlParams = new URLSearchParams(window.location.search);
            const testParam = urlParams.get('test');
            
            if (testParam) {
                const numQuestions = parseInt(testParam);
                if (!isNaN(numQuestions) && numQuestions > 0) {
                    // Determine which quiz mode based on number of questions
                    let mode = 'standard';
                    if (numQuestions <= 15) {
                        mode = 'quick';
                    } else if (numQuestions <= 25) {
                        mode = 'standard';
                    } else {
                        mode = 'indepth';
                    }
                    
                    // Start the quiz and fill random answers
                    setTimeout(() => {
                        showSection('quiz');
                        startQuiz(mode);
                        setTimeout(() => {
                            fillRandomAnswers(numQuestions);
                        }, 100);
                    }, 500);
                }
            }
        }

        function fillRandomAnswers(numQuestions) {
            const maxQuestions = Math.min(numQuestions, currentQuizQuestions.length);
            
            for (let i = 0; i < maxQuestions; i++) {
                const question = currentQuizQuestions[i];
                const numAnswers = question.answers.length;
                
                // Pick random primary answer
                const primaryIndex = Math.floor(Math.random() * numAnswers);
                
                // 50% chance to also pick a secondary answer
                let secondaryIndex = undefined;
                if (Math.random() > 0.5) {
                    do {
                        secondaryIndex = Math.floor(Math.random() * numAnswers);
                    } while (secondaryIndex === primaryIndex);
                }
                
                // Store the answers
                quizAnswers[question.id] = {
                    primary: primaryIndex,
                    secondary: secondaryIndex
                };
            }
            
            // Update display to show we've filled answers up to the specified number
            currentQuestion = Math.min(maxQuestions - 1, currentQuizQuestions.length - 1);
            displayQuestion();
            updateProgress();
            updateNavigationButtons();
            
            console.log(`Test mode: Filled ${maxQuestions} random answers`);
        }

        function displaySharedResults(profile) {
            const profileDisplay = document.getElementById('profileDisplay');
            const profileDescription = document.getElementById('profileDescription');
            
            profileDisplay.textContent = profile;
            
            // Generate description based on profile string
            // Handle ellipsis properly by parsing the profile more carefully
            const punctuationArray = parseProfileString(profile);
            const mockTopMarks = punctuationArray.slice(0, 8).map((punct, index) => ({
                punctuation: punct,
                score: 10 - index // Mock decreasing scores
            }));
            
            const description = generatePersonalityDescription(mockTopMarks);
            profileDescription.innerHTML = description;
            
            // Set share URL to current URL
            document.getElementById('shareUrl').value = window.location.href;
        }

        function parseProfileString(profile) {
            const result = [];
            let i = 0;
            
            while (i < profile.length) {
                // Check for ellipsis first (both proper and three-dot versions)
                if (profile.substr(i, 1) === '‚Ä¶') {
                    result.push('‚Ä¶');
                    i += 1;
                } else if (profile.substr(i, 3) === '...') {
                    result.push('‚Ä¶'); // Convert three dots to proper ellipsis
                    i += 3;
                }
                // Check for multi-character punctuation
                else if (profile.substr(i, 2) === '()') {
                    result.push('()');
                    i += 2;
                } else if (profile.substr(i, 2) === '[]') {
                    result.push('[]');
                    i += 2;
                } else if (profile.substr(i, 2) === '{}') {
                    result.push('{}');
                    i += 2;
                } else if (profile.substr(i, 2) === '""') {
                    result.push('""');
                    i += 2;
                }
                // Single character punctuation
                else if (profile[i].trim()) {
                    result.push(profile[i]);
                    i += 1;
                } else {
                    i += 1; // Skip whitespace
                }
            }
            
            return result;
        }

        function nextQuestion() {
            if (currentQuestion < currentQuizQuestions.length - 1) {
                currentQuestion++;
                displayQuestion();
                updateProgress();
                updateNavigationButtons();
            }
        }

        function previousQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                displayQuestion();
                updateProgress();
                updateNavigationButtons();
            }
        }

        function calculateMaxPossibleScores() {
            const maxScores = {};
            
            // Initialize all punctuation marks with 0 max scores
            const allPunctuation = [".", "!", "?", ",", ";", ":", "-", "|", "/", "\\", "()", "[]", "{}", "\"", "'", "_", "^", "`", "+", "=", "<", ">", "*", "%", "#", "&", "@", "~", "‚Ä¶"];
            allPunctuation.forEach(punct => maxScores[punct] = 0);

            // Calculate maximum possible score for each punctuation mark in current quiz
            currentQuizQuestions.forEach(question => {
                question.answers.forEach(answer => {
                    Object.keys(answer.scores).forEach(punct => {
                        // Maximum possible is primary (full points) + secondary (half points)
                        const fullPoints = answer.scores[punct];
                        const maxForThisAnswer = fullPoints + (fullPoints * 0.5);
                        maxScores[punct] += maxForThisAnswer;
                    });
                });
            });

            return maxScores;
        }

        function calculateScores() {
            const rawScores = {};
            const maxPossibleScores = calculateMaxPossibleScores();
            
            // Initialize all punctuation marks with 0 scores
            const allPunctuation = [".", "!", "?", ",", ";", ":", "-", "|", "/", "\\", "()", "[]", "{}", "\"", "'", "_", "^", "`", "+", "=", "<", ">", "*", "%", "#", "&", "@", "~", "‚Ä¶"];
            allPunctuation.forEach(punct => rawScores[punct] = 0);

            // Calculate raw scores based on answers
            Object.keys(quizAnswers).forEach(questionId => {
                const questionNum = parseInt(questionId);
                const question = currentQuizQuestions.find(q => q.id === questionNum);
                const answers = quizAnswers[questionId];

                // Primary answer gets full points
                if (answers.primary !== undefined) {
                    const primaryAnswer = question.answers[answers.primary];
                    Object.keys(primaryAnswer.scores).forEach(punct => {
                        rawScores[punct] += primaryAnswer.scores[punct];
                    });
                }

                // Secondary answer gets half points
                if (answers.secondary !== undefined) {
                    const secondaryAnswer = question.answers[answers.secondary];
                    Object.keys(secondaryAnswer.scores).forEach(punct => {
                        rawScores[punct] += secondaryAnswer.scores[punct] * 0.5;
                    });
                }
            });

            // Calculate weighted scores (percentage of maximum possible)
            const weightedScores = {};
            allPunctuation.forEach(punct => {
                if (maxPossibleScores[punct] > 0) {
                    weightedScores[punct] = (rawScores[punct] / maxPossibleScores[punct]) * 100;
                } else {
                    weightedScores[punct] = 0;
                }
            });

            return weightedScores;
        }

        function getTopPunctuationMarks(scores, count = 6) {
            // Convert scores object to array and sort by score descending
            const sortedScores = Object.keys(scores)
                .map(punct => ({
                    punctuation: punct,
                    score: scores[punct]
                }))
                .sort((a, b) => b.score - a.score)
                .filter(item => item.score > 0); // Only include marks that scored points

            // Return top count punctuation marks
            return sortedScores.slice(0, Math.min(count, 8));
        }

        function finishQuiz() {
            // Calculate final scores
            const scores = calculateScores();
            const topMarks = getTopPunctuationMarks(scores);

            // Store results for display
            // Create profile string with proper spacing for multi-character punctuation
            const profileString = topMarks.map(mark => mark.punctuation).join('');
            
            window.quizResults = {
                scores: scores,
                topMarks: topMarks,
                profile: profileString
            };

            // Show results section
            displayResults();
            showSection('results');
            
            // Show results button in navigation
            document.getElementById('resultsBtn').style.display = 'inline-block';
        }

        function displayResults() {
            const results = window.quizResults;
            const profileDisplay = document.getElementById('profileDisplay');
            const profileDescription = document.getElementById('profileDescription');

            // Display the punctuation profile
            profileDisplay.textContent = results.profile;

            // Generate personality description
            let description = generatePersonalityDescription(results.topMarks);
            
            // Add confidence indicator
            const confidence = quizModes[selectedQuizMode].confidenceLevel;
            const quizInfo = `<div style="margin-bottom: 20px; padding: 15px; background: #f8f9ff; border-radius: 8px; border-left: 4px solid #5a67d8;">
                <strong>Quiz Results:</strong> ${quizModes[selectedQuizMode].name} ‚Ä¢ ${confidence} Confidence Level<br>
                <small style="color: #666;">Based on ${currentQuizQuestions.length} questions across 6 personality dimensions</small>
            </div>`;
            
            profileDescription.innerHTML = quizInfo + description;

            // Generate shareable URL
            generateShareableUrl(results.profile);
        }

        function generatePersonalityDescription(topMarks) {
            if (topMarks.length === 0) {
                return "Your punctuation personality is unique and balanced across many traits!";
            }

            const traitItems = topMarks.map((mark, index) => {
                const species = findSpeciesInfo(mark.punctuation);
                if (!species) return '';

                return `
                    <div class="trait-item">
                        <div class="trait-symbol">${mark.punctuation}</div>
                        <div class="trait-name">${species.name}</div>
                        <div class="trait-description">${species.description.toLowerCase()}</div>
                    </div>
                `;
            }).join('');

            const strengthIndicator = `
                <div class="strength-indicator">
                    <div class="strength-label top">Strong</div>
                    <div class="strength-cone"></div>
                    <div class="strength-label bottom">Light</div>
                </div>
            `;

            return `<div class="personality-traits">${strengthIndicator}${traitItems}</div>`;
        }

        function findSpeciesInfo(punctuation) {
            for (const genusName in taxonomyData) {
                const species = taxonomyData[genusName].species.find(s => s.symbol === punctuation);
                if (species) return species;
            }
            return null;
        }

        function generateShareableUrl(profile) {
            const baseUrl = window.location.origin + window.location.pathname;
            const encodedProfile = encodeURIComponent(profile);
            const shareUrl = `${baseUrl}?profile=${encodedProfile}`;
            
            document.getElementById('shareUrl').value = shareUrl;
        }

        function copyUrl() {
            const shareUrlInput = document.getElementById('shareUrl');
            shareUrlInput.select();
            shareUrlInput.setSelectionRange(0, 99999); // For mobile devices
            
            navigator.clipboard.writeText(shareUrlInput.value).then(() => {
                // Show temporary success message
                const btn = event.target;
                const originalText = btn.textContent;
                btn.textContent = 'Copied!';
                setTimeout(() => {
                    btn.textContent = originalText;
                }, 2000);
            }).catch(() => {
                // Fallback for older browsers
                document.execCommand('copy');
                const btn = event.target;
                const originalText = btn.textContent;
                btn.textContent = 'Copied!';
                setTimeout(() => {
                    btn.textContent = originalText;
                }, 2000);
            });
        }

        function retakeQuiz() {
            // Reset quiz state
            currentQuestion = 0;
            quizAnswers = {};
            window.quizResults = null;
            currentQuizQuestions = [];
            selectedQuizMode = 'standard';
            
            // Clear URL parameters
            const url = new URL(window.location);
            url.searchParams.delete('profile');
            window.history.replaceState({}, document.title, url.pathname);
            
            // Hide results button and show quiz selection
            document.getElementById('resultsBtn').style.display = 'none';
            showSection('quiz');
            initializeQuiz();
        }
    </script>
</body>
</html>
